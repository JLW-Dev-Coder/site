<!-- /partials/blog/footer.html -->
<section class="mt-10" id="blog-footer-subscribe">

  <!-- SUBSCRIBE FRAME -->
  <div class="rounded-2xl border border-white/10 bg-white/5 p-6 shadow-soft">
    <div class="grid gap-6 md:grid-cols-2 md:items-stretch">

      <!-- LEFT: COPY -->
      <div class="flex h-full flex-col">
        <div>
          <div class="text-2xl font-extrabold leading-tight md:text-3xl">
            The Agency Builder’s Tide Report
          </div>

          <div class="mt-1 text-sm font-semibold text-white/70 md:text-base">
            Your Map To Scalability
          </div>

          <div class="mt-4 text-base text-white/80">
            Scalability is a voyage — not a gamble. Each week, The Tide Report drops the systems, tools,
            and battle-tested strategies that help real entrepreneurs go from scattered to seaworthy.
          </div>
        </div>

        <div class="mt-3 text-base text-white/80">
          Don’t drift.
          <span class="item-instructions-cta font-extrabold">Subscribe</span>
          and stay in the current.
          <span class="mt-2 block text-sm text-white/60">
            You’ll receive a confirmation email to verify your subscription before the next Tide Report is delivered.
          </span>
        </div>
      </div>

    <!-- RIGHT: FORM -->
  <div class="rounded-2xl border border-white/10 bg-ink-950/40 p-5 shadow-soft">
    <div class="text-sm font-extrabold text-white">Subscribe</div>
    <p class="mt-2 text-xs text-white/60">Get the next Tide Report drop.</p>
  
    <div class="mt-4 booking-embed w-full overflow-visible rounded-xl border border-white/10 bg-ink-900/60 p-4">
      <script src="https://secure.virtuallaunch.pro/frm/2uxzgUhaTids8Ujq6.js"></script>
    </div>
  </div>


  <!-- VIEW ALL BLOG -->
  <div class="mt-6 flex justify-center">
    <a
      href="/blog/"
      class="inline-flex items-center gap-2 rounded-lg border border-white/20 bg-white/5 px-4 py-2 text-sm font-extrabold text-white/80 hover:bg-white/10 hover:text-white"
    >
      ← View all blog posts
    </a>
  </div>

  <script>
    (function () {
      var EMBED_ID = "vl-subscribe-embed";
      var SCRIPT_SRC = "https://secure.virtuallaunch.pro/frm/2uxzgUhaTids8Ujq6.js";

      var root = document.getElementById(EMBED_ID);
      if (!root) return;

      function getIframe() {
        return root.querySelector("iframe");
      }

      function styleIframe(iframe) {
        if (!iframe || iframe.__vlStyled) return;
        iframe.__vlStyled = true;

        iframe.setAttribute("allowtransparency", "true");
        iframe.style.background = "#070a10";
        iframe.style.border = "0";
        iframe.style.display = "block";
        iframe.style.height = "360px";
        iframe.style.minHeight = "360px";
        iframe.style.width = "100%";
      }

      function scan() {
        styleIframe(getIframe());
      }

      function removeEmbedScripts() {
        var scripts = document.querySelectorAll('script[src^="' + SCRIPT_SRC + '"]');
        for (var i = 0; i < scripts.length; i += 1) {
          if (scripts[i] && scripts[i].parentNode) scripts[i].parentNode.removeChild(scripts[i]);
        }
      }

      function injectEmbedScript(force) {
        if (getIframe()) return;

        if (force) {
          removeEmbedScripts();
          root.innerHTML = "";
        }

        var s = document.createElement("script");
        s.async = true;
        s.src = SCRIPT_SRC + (SCRIPT_SRC.indexOf("?") >= 0 ? "&" : "?") + "cb=" + Date.now();

        s.onerror = function () {
          root.__vlEmbedFailed = true;
        };

        document.head.appendChild(s);
      }

      if (!root.__vlObserverAttached) {
        root.__vlObserverAttached = true;
        new MutationObserver(scan).observe(root, { childList: true, subtree: true });
      }

      // First attempt (force reload in case the script ran earlier elsewhere before this node existed)
      injectEmbedScript(true);
      scan();

      if (!root.__vlRetryTimer) {
        var attempts = 0;
        var maxAttempts = 10;

        root.__vlRetryTimer = setInterval(function () {
          attempts += 1;

          if (getIframe()) {
            clearInterval(root.__vlRetryTimer);
            root.__vlRetryTimer = null;
            return;
          }

          // If it errored or still hasn't rendered, force a clean reload
          if (root.__vlEmbedFailed || attempts % 2 === 0) {
            root.__vlEmbedFailed = false;
            injectEmbedScript(true);
          } else {
            injectEmbedScript(false);
          }

          scan();

          if (attempts >= maxAttempts) {
            clearInterval(root.__vlRetryTimer);
            root.__vlRetryTimer = null;
          }
        }, 1500);
      }

      document.addEventListener("visibilitychange", function () {
        if (document.visibilityState === "visible" && !getIframe()) {
          injectEmbedScript(true);
          scan();
        }
      });

      window.addEventListener("load", function () {
        if (!getIframe()) injectEmbedScript(true);
        scan();
      });
    })();
  </script>

</section>
